import{_ as s,c as i,o as a,a3 as e}from"./chunks/framework.BSgsMaz1.js";const E=JSON.parse('{"title":"MySQL 索引优化","description":"","frontmatter":{"icon":"mysql","title":"MySQL 索引优化"},"headers":[],"relativePath":"docs/db/mysql/索引优化.md","filePath":"docs/db/mysql/索引优化.md","lastUpdated":1714888091000}'),l={name:"docs/db/mysql/索引优化.md"},t=e('<h1 id="mysql索引优化" tabindex="-1">MySQl索引优化： <a class="header-anchor" href="#mysql索引优化" aria-label="Permalink to &quot;MySQl索引优化：&quot;">​</a></h1><h3 id="索引使用" tabindex="-1">索引使用 <a class="header-anchor" href="#索引使用" aria-label="Permalink to &quot;索引使用&quot;">​</a></h3><p>在MySQL中，创建索引的基本命令是 <code>CREATE INDEX</code>。以下是创建索引的一般语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> index_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> table_name (column_name[, ...]);</span></span></code></pre></div><p>如果你想创建一个普通索引（非唯一索引），你只需指定索引名和基于哪些列创建索引</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idx_username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users (username);</span></span></code></pre></div><p>在这个例子中，<code>idx_username</code> 是索引的名字，<code>users</code> 是表的名字，<code>username</code> 是你要在其上创建索引的列名。</p><p>如果你想要创建一个唯一索引（不允许重复值的索引），可以使用 <code>UNIQUE</code> 关键字：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> UNIQUE INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idx_unique_email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users (email);</span></span></code></pre></div><p>另外，MySQL还支持创建部分索引（只对列的一部分进行索引）和前缀索引，例如：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idx_user_lastname_prefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users (lastname(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><p>在这个例子中，索引仅基于 <code>lastname</code> 列的前10个字符。</p><p>对于全文索引（适用于文本类型的列进行全文搜索），语法有所不同：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FULLTEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idx_fulltext_description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> products (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>最后，如果要在已经存在的表上创建索引，也可以使用 <code>ALTER TABLE</code> 命令：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> table_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index_name (column_name);</span></span></code></pre></div><p>或者对于唯一索引：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> table_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idx_unique_column (column_name);</span></span></code></pre></div><h3 id="索引设计原则" tabindex="-1">索引设计原则 <a class="header-anchor" href="#索引设计原则" aria-label="Permalink to &quot;索引设计原则&quot;">​</a></h3><ul><li>在where字段中频繁出现，并且区分度高的字段添加索引</li><li>为排序，分组，连接操作设计的字段创建索引</li><li>限制索引的数量，删除不必要或冗余的索引应该被移除</li><li>对于 BLOB、TEXT 和 VARCHAR 类型的列，大文本字段添加前缀索引，因为占用大量的存储空间，同时增加插入和更新时维护索引的成本，索引不在高效。</li><li>在经常更新的列上避免使用索引，因为更新时索引要同步</li></ul><h3 id="选择索引类型" tabindex="-1">选择索引类型 <a class="header-anchor" href="#选择索引类型" aria-label="Permalink to &quot;选择索引类型&quot;">​</a></h3><ul><li>常规的查询通常使用B+树索引（主键索引，唯一，普通索引）（Innodb）</li><li>对于查找速度快并且数据重复少的字段可以考虑hash索引</li><li>全文检索需求使用FULLTEXT索引。（MyISAM）</li><li>空间索引地理位置存储R-tree（MyISAM）</li></ul>',22),h=[t];function n(p,d,k,o,r,c){return a(),i("div",null,h)}const u=s(l,[["render",n]]);export{E as __pageData,u as default};
