<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7_Redis集群 | 成的技术航行记</title>
    <meta name="description" content="全栈深入探索">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/doc/static/style.Bz4WSdRZ.css" as="style">
    
    <script type="module" src="/doc/static/app.TyHJ5YoN.js"></script>
    <link rel="preload" href="/doc/static/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/doc/static/chunks/framework.BSgsMaz1.js">
    <link rel="modulepreload" href="/doc/static/chunks/theme.wsUz62rT.js">
    <link rel="modulepreload" href="/doc/static/docs_db_redis_7_Redis集群.md.Ditgtlai.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c3508ec8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c3508ec8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar has-sidebar top" data-v-f1e365da data-v-40788ea0><div class="wrapper" data-v-40788ea0><div class="container" data-v-40788ea0><div class="title" data-v-40788ea0><div class="VPNavBarTitle has-sidebar" data-v-40788ea0 data-v-28a961f9><a class="title" href="/doc/" data-v-28a961f9><!--[--><!--]--><!--[--><img class="VPImage logo" src="/doc/logo.svg" alt data-v-35a7d0b8><!--]--><span data-v-28a961f9>成的技术航行记</span><!--[--><!--]--></a></div></div><div class="content" data-v-40788ea0><div class="content-body" data-v-40788ea0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-40788ea0><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-40788ea0 data-v-492ea56d><span id="main-nav-aria-label" class="visually-hidden" data-v-492ea56d>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/doc/" tabindex="0" data-v-492ea56d data-v-ed5ac1f6><!--[--><span data-v-ed5ac1f6>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>前端</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><p class="title" data-v-48c802d0>javascript</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[--><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><p class="title" data-v-48c802d0>typescript</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[--><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/doc/docs/front/vue/" data-v-8b74d055><!--[-->Vue.js<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><p class="title" data-v-48c802d0>前端工具</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->Webpack<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->Vite<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/doc/docs/data-structure-and-algorithm/1_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" tabindex="0" data-v-492ea56d data-v-ed5ac1f6><!--[--><span data-v-ed5ac1f6>算法</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Java</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><!----><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->面向对象<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->集合框架<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->IO框架<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->并发框架<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->新特性<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->JVM<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>数据库</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><p class="title" data-v-48c802d0>SQL数据库</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->MySQL<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><p class="title" data-v-48c802d0>NoSQL数据库</p><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/docs/db/redis/1_Redis%E5%9F%BA%E7%A1%80.html" data-v-8b74d055><!--[-->Redis<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->MongoDB<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->ES<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Spring</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><!----><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->Spring<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->Spring Boot实战<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->Spring Cloud<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->Spring AI<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>工具|部署</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><!----><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/docs/linux/linux/Linux%E5%91%BD%E4%BB%A4.html" data-v-8b74d055><!--[-->Linux<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/docs/linux/git/git.html" data-v-8b74d055><!--[-->Git学习<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/docs/linux/docker/Docker%E5%88%9D%E8%AF%86.html" data-v-8b74d055><!--[-->Docker<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/docs/linux/k8s/k8s%E5%88%9D%E8%AF%86.html" data-v-8b74d055><!--[-->K8s<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->工具<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/docs/linux/macos/" data-v-8b74d055><!--[-->系统<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>方法论</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->设计模式<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->代码规范<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-97491713 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->开发理论<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-492ea56d data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>关于</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><div class="items" data-v-97491713><!--[--><!--[--><div class="VPMenuGroup" data-v-97491713 data-v-48c802d0><!----><!--[--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->个人简介<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->联系方式<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-48c802d0 data-v-8b74d055><a class="VPLink link" href="/doc/....html" data-v-8b74d055><!--[-->本文档搭建<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-40788ea0 data-v-ead91a81><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-ead91a81 data-v-b79b56d4 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-b79b56d4></span><span class="vpi-moon moon" data-v-b79b56d4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-40788ea0 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chizhang977/docs" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-717b8b75><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-40788ea0 data-v-9b536d0b data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e5380155><span class="vpi-more-horizontal icon" data-v-e5380155></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-97491713><!----><!--[--><!--[--><!----><div class="group" data-v-9b536d0b><div class="item appearance" data-v-9b536d0b><p class="label" data-v-9b536d0b>Appearance</p><div class="appearance-action" data-v-9b536d0b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-9b536d0b data-v-b79b56d4 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-b79b56d4></span><span class="vpi-moon moon" data-v-b79b56d4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9b536d0b><div class="item social-links" data-v-9b536d0b><div class="VPSocialLinks social-links-list" data-v-9b536d0b data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chizhang977/docs" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-717b8b75><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-40788ea0 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-40788ea0><div class="divider-line" data-v-40788ea0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-bc9dc845><button data-v-bc9dc845>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-ec846e01><div class="curtain" data-v-ec846e01></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ec846e01><span class="visually-hidden" id="sidebar-aria-label" data-v-ec846e01> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-ec846e01><section class="VPSidebarItem level-0 has-active" data-v-ec846e01 data-v-2ea20db7><div class="item" role="button" tabindex="0" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><h2 class="text" data-v-2ea20db7>Redis详解</h2><!----></div><div class="items" data-v-2ea20db7><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/1_Redis%E5%9F%BA%E7%A1%80.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis初识</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/2_Redis%E5%9F%BA%E7%A1%80.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/3_%E7%BC%93%E5%AD%98%E8%AF%A6%E8%A7%A3.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis缓存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/4_%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis多级缓存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/5_%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis分布式缓存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/6_%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/7_Redis%E9%9B%86%E7%BE%A4.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis集群</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/8_%E5%AE%89%E8%A3%85OpenResty.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis & OpenResty</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2ea20db7 data-v-2ea20db7><div class="item" data-v-2ea20db7><div class="indicator" data-v-2ea20db7></div><a class="VPLink link link" href="/doc/docs/db/redis/9_%E5%AE%89%E8%A3%85Canal.html" data-v-2ea20db7><!--[--><p class="text" data-v-2ea20db7>Redis & Canal</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-6d7b3c46 data-v-b6ca177b><div class="content" data-v-b6ca177b><div class="outline-marker" data-v-b6ca177b></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b6ca177b>On this page</div><ul class="VPDocOutlineItem root" data-v-b6ca177b data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _doc_docs_db_redis_7_Redis%E9%9B%86%E7%BE%A4" data-v-83890dd9><div><h1 id="redis集群" tabindex="-1">Redis集群 <a class="header-anchor" href="#redis集群" aria-label="Permalink to &quot;Redis集群&quot;">​</a></h1><p>本章是基于CentOS7下的Redis集群教程，包括：</p><ul><li>单机安装Redis</li><li>Redis主从</li><li>Redis分片集群</li></ul><h1 id="_1-单机安装redis" tabindex="-1">1.单机安装Redis <a class="header-anchor" href="#_1-单机安装redis" aria-label="Permalink to &quot;1.单机安装Redis&quot;">​</a></h1><p>首先需要安装Redis所需要的依赖：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcl</span></span></code></pre></div><p>然后将课前资料提供的Redis安装包上传到虚拟机的任意目录：</p><p><img src="/doc/assets/image/redis/image-20210629114325516.png" alt="image-20210629114325516"></p><p>例如，我放到了/tmp目录：</p><p><img src="/doc/assets/image/redis/image-20210629114830642.png" alt="image-20210629114830642"></p><p>解压缩：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xzf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-6.2.4.tar.gz</span></span></code></pre></div><p>解压后：</p><p><img src="/doc/assets/image/redis/image-20210629114941810.png" alt="image-20210629114941810"></p><p>进入redis目录：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-6.2.4</span></span></code></pre></div><p>运行编译命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>如果没有出错，应该就安装成功了。</p><p>然后修改redis.conf文件中的一些配置：</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 绑定地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bind 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 保护模式，关闭保护模式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">protected-mode no</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 数据库数量，设置为1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">databases 1</span></span></code></pre></div><p>启动Redis：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis.conf</span></span></code></pre></div><p>停止redis服务：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shutdown</span></span></code></pre></div><h1 id="_2-redis主从集群" tabindex="-1">2.Redis主从集群 <a class="header-anchor" href="#_2-redis主从集群" aria-label="Permalink to &quot;2.Redis主从集群&quot;">​</a></h1><h2 id="_2-1-集群结构" tabindex="-1">2.1.集群结构 <a class="header-anchor" href="#_2-1-集群结构" aria-label="Permalink to &quot;2.1.集群结构&quot;">​</a></h2><p>我们搭建的主从集群结构如图：</p><p><img src="/doc/assets/image/redis/image-20210630111505799.png" alt="image-20210630111505799"></p><p>共包含三个节点，一个主节点，两个从节点。</p><p>这里我们会在同一台虚拟机中开启3个redis实例，模拟主从集群，信息如下：</p><table><thead><tr><th style="text-align:center;">IP</th><th style="text-align:center;">PORT</th><th style="text-align:center;">角色</th></tr></thead><tbody><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">7001</td><td style="text-align:center;">master</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">7002</td><td style="text-align:center;">slave</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">7003</td><td style="text-align:center;">slave</td></tr></tbody></table><h2 id="_2-2-准备实例和配置" tabindex="-1">2.2.准备实例和配置 <a class="header-anchor" href="#_2-2-准备实例和配置" aria-label="Permalink to &quot;2.2.准备实例和配置&quot;">​</a></h2><p>要在同一台虚拟机开启3个实例，必须准备三份不同的配置文件和目录，配置文件所在目录也就是工作目录。</p><p>1）创建目录</p><p>我们创建三个文件夹，名字分别叫7001、7002、7003：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入/tmp目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span></span></code></pre></div><p>如图：</p><p><img src="/doc/assets/image/redis/image-20210630113929868.png" alt="image-20210630113929868"></p><p>2）恢复原始配置</p><p>修改redis-6.2.4/redis.conf文件，将其中的持久化模式改为默认的RDB模式，AOF保持关闭状态。</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开启RDB</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># save &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save 3600 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save 300 100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save 60 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭AOF</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appendonly no</span></span></code></pre></div><p>3）拷贝配置文件到每个实例目录</p><p>然后将redis-6.2.4/redis.conf文件拷贝到三个目录中（在/tmp目录执行下列命令）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 方式一：逐个拷贝</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-6.2.4/redis.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-6.2.4/redis.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-6.2.4/redis.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 方式二：管道组合命令，一键拷贝</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-6.2.4/redis.conf</span></span></code></pre></div><p>4）修改每个实例的端口、工作目录</p><p>修改每个文件夹内的配置文件，将端口分别修改为7001、7002、7003，将rdb文件保存位置都修改为自己所在目录（在/tmp目录执行下列命令）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/6379/7001/g&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/dir .\//dir \/tmp\/7001\//g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7001/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/6379/7002/g&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/dir .\//dir \/tmp\/7002\//g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7002/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/6379/7003/g&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/dir .\//dir \/tmp\/7003\//g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7003/redis.conf</span></span></code></pre></div><p>5）修改每个实例的声明IP</p><p>虚拟机本身有多个IP，为了避免将来混乱，我们需要在redis.conf文件中指定每一个实例的绑定ip信息，格式如下：</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># redis实例的声明 IP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">replica-announce-ip 192.168.150.101</span></span></code></pre></div><p>每个目录都要改，我们一键完成修改（在/tmp目录执行下列命令）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 逐一执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;1a replica-announce-ip 192.168.150.101&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7001/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;1a replica-announce-ip 192.168.150.101&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7002/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;1a replica-announce-ip 192.168.150.101&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7003/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或者一键修改</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">printf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%s\n&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} -t sed -i &#39;1a replica-announce-ip 192.168.150.101&#39; {}/redis.conf</span></span></code></pre></div><h2 id="_2-3-启动" tabindex="-1">2.3.启动 <a class="header-anchor" href="#_2-3-启动" aria-label="Permalink to &quot;2.3.启动&quot;">​</a></h2><p>为了方便查看日志，我们打开3个ssh窗口，分别启动3个redis实例，启动命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第1个</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7001/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第2个</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7002/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第3个</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7003/redis.conf</span></span></code></pre></div><p>启动后：</p><p><img src="/doc/assets/image/redis/image-20210630183914491.png" alt="image-20210630183914491"></p><p>如果要一键停止，可以运行下面命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">printf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%s\n&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} -t redis-cli -p {} shutdown</span></span></code></pre></div><h2 id="_2-4-开启主从关系" tabindex="-1">2.4.开启主从关系 <a class="header-anchor" href="#_2-4-开启主从关系" aria-label="Permalink to &quot;2.4.开启主从关系&quot;">​</a></h2><p>现在三个实例还没有任何关系，要配置主从可以使用replicaof 或者slaveof（5.0以前）命令。</p><p>有临时和永久两种模式：</p><ul><li><p>修改配置文件（永久生效）</p><ul><li>在redis.conf中添加一行配置：<code>slaveof &lt;masterip&gt; &lt;masterport&gt;</code></li></ul></li><li><p>使用redis-cli客户端连接到redis服务，执行slaveof命令（重启后失效）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slaveof</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">masteri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">masterpor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div></li></ul><p><strong><!----></strong>：在5.0以后新增命令replicaof，与salveof效果一致。</p><p>这里我们为了演示方便，使用方式二。</p><p>通过redis-cli命令连接7002，执行下面命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接 7002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行slaveof</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slaveof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.150.101</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span></span></code></pre></div><p>通过redis-cli命令连接7003，执行下面命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接 7003</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行slaveof</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slaveof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.150.101</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span></span></code></pre></div><p>然后连接 7001节点，查看集群状态：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接 7001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> replication</span></span></code></pre></div><p>结果：</p><p><img src="/doc/assets/image/redis/image-20210630201258802.png" alt="image-20210630201258802"></p><h2 id="_2-5-测试" tabindex="-1">2.5.测试 <a class="header-anchor" href="#_2-5-测试" aria-label="Permalink to &quot;2.5.测试&quot;">​</a></h2><p>执行下列操作以测试：</p><ul><li><p>利用redis-cli连接7001，执行<code>set num 123</code></p></li><li><p>利用redis-cli连接7002，执行<code>get num</code>，再执行<code>set num 666</code></p></li><li><p>利用redis-cli连接7003，执行<code>get num</code>，再执行<code>set num 888</code></p></li></ul><p>可以发现，只有在7001这个master节点上可以执行写操作，7002和7003这两个slave节点只能执行读操作。</p><h1 id="_3-搭建哨兵集群" tabindex="-1">3.搭建哨兵集群 <a class="header-anchor" href="#_3-搭建哨兵集群" aria-label="Permalink to &quot;3.搭建哨兵集群&quot;">​</a></h1><h2 id="_3-1-集群结构" tabindex="-1">3.1.集群结构 <a class="header-anchor" href="#_3-1-集群结构" aria-label="Permalink to &quot;3.1.集群结构&quot;">​</a></h2><p>这里我们搭建一个三节点形成的Sentinel集群，来监管之前的Redis主从集群。如图：</p><p><img src="/doc/assets/image/redis/image-20210701215227018.png" alt="image-20210701215227018"></p><p>三个sentinel实例信息如下：</p><table><thead><tr><th>节点</th><th style="text-align:center;">IP</th><th style="text-align:center;">PORT</th></tr></thead><tbody><tr><td>s1</td><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">27001</td></tr><tr><td>s2</td><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">27002</td></tr><tr><td>s3</td><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">27003</td></tr></tbody></table><h2 id="_3-2-准备实例和配置" tabindex="-1">3.2.准备实例和配置 <a class="header-anchor" href="#_3-2-准备实例和配置" aria-label="Permalink to &quot;3.2.准备实例和配置&quot;">​</a></h2><p>要在同一台虚拟机开启3个实例，必须准备三份不同的配置文件和目录，配置文件所在目录也就是工作目录。</p><p>我们创建三个文件夹，名字分别叫s1、s2、s3：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入/tmp目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3</span></span></code></pre></div><p>如图：</p><p><img src="/doc/assets/image/redis/image-20210701215534714.png" alt="image-20210701215534714"></p><p>然后我们在s1目录创建一个sentinel.conf文件，添加下面的内容：</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port 27001</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sentinel announce-ip 192.168.150.101</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sentinel monitor mymaster 192.168.150.101 7001 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sentinel down-after-milliseconds mymaster 5000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sentinel failover-timeout mymaster 60000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dir </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/tmp/s1&quot;</span></span></code></pre></div><p>解读：</p><ul><li><code>port 27001</code>：是当前sentinel实例的端口</li><li><code>sentinel monitor mymaster 192.168.150.101 7001 2</code>：指定主节点信息 <ul><li><code>mymaster</code>：主节点名称，自定义，任意写</li><li><code>192.168.150.101 7001</code>：主节点的ip和端口</li><li><code>2</code>：选举master时的quorum值</li></ul></li></ul><p>然后将s1/sentinel.conf文件拷贝到s2、s3两个目录中（在/tmp目录执行下列命令）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 方式一：逐个拷贝</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s1/sentinel.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s1/sentinel.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 方式二：管道组合命令，一键拷贝</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s1/sentinel.conf</span></span></code></pre></div><p>修改s2、s3两个文件夹内的配置文件，将端口分别修改为27002、27003：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/27001/27002/g&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/s1/s2/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s2/sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/27001/27003/g&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/s1/s3/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3/sentinel.conf</span></span></code></pre></div><h2 id="_3-3-启动" tabindex="-1">3.3.启动 <a class="header-anchor" href="#_3-3-启动" aria-label="Permalink to &quot;3.3.启动&quot;">​</a></h2><p>为了方便查看日志，我们打开3个ssh窗口，分别启动3个redis实例，启动命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第1个</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s1/sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第2个</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s2/sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第3个</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3/sentinel.conf</span></span></code></pre></div><p>启动后：</p><p><img src="/doc/assets/image/redis/image-20210701220714104.png" alt="image-20210701220714104"></p><h2 id="_3-4-测试" tabindex="-1">3.4.测试 <a class="header-anchor" href="#_3-4-测试" aria-label="Permalink to &quot;3.4.测试&quot;">​</a></h2><p>尝试让master节点7001宕机，查看sentinel日志：</p><p><img src="/doc/assets/image/redis/image-20210701222857997.png" alt="image-20210701222857997"></p><p>查看7003的日志：</p><p><img src="/doc/assets/image/redis/image-20210701223025709.png" alt="image-20210701223025709"></p><p>查看7002的日志：</p><p><img src="/doc/assets/image/redis/image-20210701223131264.png" alt="image-20210701223131264"></p><h1 id="_4-搭建分片集群" tabindex="-1">4.搭建分片集群 <a class="header-anchor" href="#_4-搭建分片集群" aria-label="Permalink to &quot;4.搭建分片集群&quot;">​</a></h1><h2 id="_4-1-集群结构" tabindex="-1">4.1.集群结构 <a class="header-anchor" href="#_4-1-集群结构" aria-label="Permalink to &quot;4.1.集群结构&quot;">​</a></h2><p>分片集群需要的节点数量较多，这里我们搭建一个最小的分片集群，包含3个master节点，每个master包含一个slave节点，结构如下：</p><p><img src="/doc/assets/image/redis/image-20210702164116027.png" alt="image-20210702164116027"></p><p>这里我们会在同一台虚拟机中开启6个redis实例，模拟分片集群，信息如下：</p><table><thead><tr><th style="text-align:center;">IP</th><th style="text-align:center;">PORT</th><th style="text-align:center;">角色</th></tr></thead><tbody><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">7001</td><td style="text-align:center;">master</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">7002</td><td style="text-align:center;">master</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">7003</td><td style="text-align:center;">master</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">8001</td><td style="text-align:center;">slave</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">8002</td><td style="text-align:center;">slave</td></tr><tr><td style="text-align:center;">192.168.150.101</td><td style="text-align:center;">8003</td><td style="text-align:center;">slave</td></tr></tbody></table><h2 id="_4-2-准备实例和配置" tabindex="-1">4.2.准备实例和配置 <a class="header-anchor" href="#_4-2-准备实例和配置" aria-label="Permalink to &quot;4.2.准备实例和配置&quot;">​</a></h2><p>删除之前的7001、7002、7003这几个目录，重新创建出7001、7002、7003、8001、8002、8003目录：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入/tmp目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除旧的，避免配置干扰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8003</span></span></code></pre></div><p>在/tmp下准备一个新的redis.conf文件，内容如下：</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port 6379</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开启集群功能</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cluster-enabled yes</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 集群的配置文件名称，不需要我们创建，由redis自己维护</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cluster-config-file /tmp/6379/nodes.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 节点心跳失败的超时时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cluster-node-timeout 5000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 持久化文件存放目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dir /tmp/6379</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 绑定地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bind 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 让redis后台运行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">daemonize yes</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 注册的实例ip</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">replica-announce-ip 192.168.150.101</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 保护模式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">protected-mode no</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 数据库数量</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">databases 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 日志</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logfile /tmp/6379/run.log</span></span></code></pre></div><p>将这个文件拷贝到每个目录下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入/tmp目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行拷贝</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis.conf</span></span></code></pre></div><p>修改每个目录下的redis.conf，将其中的6379修改为与所在目录一致：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入/tmp目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改配置文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">printf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%s\n&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} -t sed -i &#39;s/6379/{}/g&#39; {}/redis.conf</span></span></code></pre></div><h2 id="_4-3-启动" tabindex="-1">4.3.启动 <a class="header-anchor" href="#_4-3-启动" aria-label="Permalink to &quot;4.3.启动&quot;">​</a></h2><p>因为已经配置了后台启动模式，所以可以直接启动服务：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入/tmp目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 一键启动所有服务</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">printf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%s\n&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} -t redis-server {}/redis.conf</span></span></code></pre></div><p>通过ps查看状态：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span></span></code></pre></div><p>发现服务都已经正常启动：</p><p><img src="/doc/assets/image/redis/image-20210702174255799.png" alt="image-20210702174255799"></p><p>如果要关闭所有进程，可以执行命令：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $2}&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kill</span></span></code></pre></div><p>或者（推荐这种方式）：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">printf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%s\n&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7003</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8001</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8002</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8003</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} -t redis-cli -p {} shutdown</span></span></code></pre></div><h2 id="_4-4-创建集群" tabindex="-1">4.4.创建集群 <a class="header-anchor" href="#_4-4-创建集群" aria-label="Permalink to &quot;4.4.创建集群&quot;">​</a></h2><p>虽然服务启动了，但是目前每个服务之间都是独立的，没有任何关联。</p><p>我们需要执行命令来创建集群，在Redis5.0之前创建集群比较麻烦，5.0之后集群管理命令都集成到了redis-cli中。</p><p>1）Redis5.0之前</p><p>Redis5.0之前集群命令都是用redis安装包下的src/redis-trib.rb来实现的。因为redis-trib.rb是有ruby语言编写的所以需要安装ruby环境。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ruby</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rubygems</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span></span></code></pre></div><p>然后通过命令来管理集群：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入redis的src目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/redis-6.2.4/src</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建集群</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./redis-trib.rb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --replicas</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:7001</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:7002</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:7003</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:8001</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:8002</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:8003</span></span></code></pre></div><p>2）Redis5.0以后</p><p>我们使用的是Redis6.2.4版本，集群管理以及集成到了redis-cli中，格式如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cluster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cluster-replicas</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:7001</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:7002</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:7003</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:8001</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:8002</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 192.168.150.101:8003</span></span></code></pre></div><p>命令说明：</p><ul><li><code>redis-cli --cluster</code>或者<code>./redis-trib.rb</code>：代表集群操作命令</li><li><code>create</code>：代表是创建集群</li><li><code>--replicas 1</code>或者<code>--cluster-replicas 1</code> ：指定集群中每个master的副本个数为1，此时<code>节点总数 ÷ (replicas + 1)</code> 得到的就是master的数量。因此节点列表中的前n个就是master，其它节点都是slave节点，随机分配到不同master</li></ul><p>运行后的样子：</p><p><img src="/doc/assets/image/redis/image-20210702181101969.png" alt="image-20210702181101969"></p><p>这里输入yes，则集群开始创建：</p><p><img src="/doc/assets/image/redis/image-20210702181215705.png" alt="image-20210702181215705"></p><p>通过命令可以查看集群状态：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cluster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span></span></code></pre></div><p><img src="/doc/assets/image/redis/image-20210702181922809.png" alt="image-20210702181922809"></p><h2 id="_4-5-测试" tabindex="-1">4.5.测试 <a class="header-anchor" href="#_4-5-测试" aria-label="Permalink to &quot;4.5.测试&quot;">​</a></h2><p>尝试连接7001节点，存储一个数据：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 存储数据</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> num</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 123</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 读取数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> num</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 再次存储</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre></div><p>结果悲剧了：</p><p><img src="/doc/assets/image/redis/image-20210702182343979.png" alt="image-20210702182343979"></p><p>集群操作时，需要给<code>redis-cli</code>加上<code>-c</code>参数才可以：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7001</span></span></code></pre></div><p>这次可以了：</p><p><img src="/doc/assets/image/redis/image-20210702182602145.png" alt="image-20210702182602145"></p></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-b88cabfa><!--[--><!--]--><div class="edit-info" data-v-b88cabfa><div class="edit-link" data-v-b88cabfa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/vuejs/vitepress/edit/main/docs/docs/db/redis/7_Redis集群.md" target="_blank" rel="noreferrer" data-v-b88cabfa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-b88cabfa></span> 在Github上编辑此页<!--]--></a></div><div class="last-updated" data-v-b88cabfa><p class="VPLastUpdated" data-v-b88cabfa data-v-9da12f1d>最后更新于:: <time datetime="2024-05-05T05:48:11.000Z" data-v-9da12f1d></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-b88cabfa><span class="visually-hidden" id="doc-footer-aria-label" data-v-b88cabfa>Pager</span><div class="pager" data-v-b88cabfa><a class="VPLink link pager-link prev" href="/doc/docs/db/redis/6_%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" data-v-b88cabfa><!--[--><span class="desc" data-v-b88cabfa>Previous page</span><span class="title" data-v-b88cabfa>Redis最佳实践</span><!--]--></a></div><div class="pager" data-v-b88cabfa><a class="VPLink link pager-link next" href="/doc/docs/db/redis/8_%E5%AE%89%E8%A3%85OpenResty.html" data-v-b88cabfa><!--[--><span class="desc" data-v-b88cabfa>Next page</span><span class="title" data-v-b88cabfa>Redis & OpenResty</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Released under the MIT License.</p><p class="copyright" data-v-c970a860>Copyright © 2024-present chizhang977</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"docs_db_redis_9_安装canal.md\":\"XKPzhQRj\",\"docs_linux_docker_docker镜像概念.md\":\"TE1mwTw8\",\"docs_db_redis_6_最佳实践.md\":\"CeyH0tw0\",\"docs_db_redis_2_redis基础.md\":\"CyunSbvy\",\"docs_linux_git_git.md\":\"CzqEmBMo\",\"docs_front_vue_index.md\":\"0eeCkJKA\",\"docs_db_redis_5_分布式缓存.md\":\"BX3G5iR_\",\"docs_linux_docker_dockerfile详解.md\":\"WAao_JWx\",\"docs_db_mysql_sql语句优化.md\":\"_6JWtZfD\",\"docs_db_redis_1_redis基础.md\":\"Cd1LOmT0\",\"docs_db_redis_3_缓存详解.md\":\"DHPHOxKo\",\"docs_db_mysql_存储引擎.md\":\"CxxBqEuG\",\"docs_linux_k8s_k8s初识.md\":\"DIayXD6W\",\"docs_linux_docker_docker软件安装.md\":\"CTJj1k8W\",\"docs_db_redis_7_redis集群.md\":\"Ditgtlai\",\"docs_linux_docker_docker可视化.md\":\"Cs7Db1_G\",\"docs_linux_docker_主从复制.md\":\"CDY29OfY\",\"docs_db_redis_8_安装openresty.md\":\"DYK8z2jG\",\"docs_linux_docker_dockercompose.md\":\"m7Q3kmwK\",\"docs_linux_docker_docker初识.md\":\"CV8h4xBe\",\"docs_linux_docker_docker网络.md\":\"DZOurJQP\",\"docs_linux_docker_dokcer数据卷.md\":\"BSnJrKKA\",\"docs_linux_linux_linux命令.md\":\"DNNrdg6W\",\"index.md\":\"Dck31ns9\",\"docs_db_mysql_索引优化.md\":\"CELdospl\",\"docs_linux_docker_docker常用命令.md\":\"C8XKC0Hr\",\"docs_linux_macos_index.md\":\"B9C5fCmO\",\"docs_linux_docker_docker常见命令.md\":\"DVqC1OZz\",\"docs_front_vue_vue3.md\":\"BP9vtG0p\",\"docs_db_redis_4_多级缓存.md\":\"DSejH_kL\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"成的技术航行记\",\"description\":\"全栈深入探索\",\"base\":\"/doc/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"outline\":[2,3],\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"lastUpdated\":{\"text\":\"最后更新于:\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"前端\",\"items\":[{\"text\":\"javascript\",\"items\":[{\"text\":\"\",\"link\":\"...\"}]},{\"text\":\"typescript\",\"items\":[{\"text\":\"\",\"link\":\"...\"}]},{\"text\":\"Vue.js\",\"link\":\"/docs/front/vue/\"},{\"text\":\"前端工具\",\"items\":[{\"text\":\"Webpack\",\"link\":\"...\"},{\"text\":\"Vite\",\"link\":\"...\"}]}]},{\"text\":\"算法\",\"link\":\"/docs/data-structure-and-algorithm/1_数据结构\"},{\"text\":\"Java\",\"items\":[{\"items\":[{\"text\":\"面向对象\",\"link\":\"...\"},{\"text\":\"集合框架\",\"link\":\"...\"},{\"text\":\"IO框架\",\"link\":\"...\"},{\"text\":\"并发框架\",\"link\":\"...\"},{\"text\":\"新特性\",\"link\":\"...\"},{\"text\":\"JVM\",\"link\":\"...\"}]}]},{\"text\":\"数据库\",\"items\":[{\"text\":\"SQL数据库\",\"items\":[{\"text\":\"MySQL\",\"link\":\"...\"}]},{\"text\":\"NoSQL数据库\",\"items\":[{\"text\":\"Redis\",\"link\":\"/docs/db/redis/1_Redis基础\"},{\"text\":\"MongoDB\",\"link\":\"...\"},{\"text\":\"ES\",\"link\":\"...\"}]}]},{\"text\":\"Spring\",\"items\":[{\"items\":[{\"text\":\"Spring\",\"link\":\"...\"},{\"text\":\"Spring Boot实战\",\"link\":\"...\"},{\"text\":\"Spring Cloud\",\"link\":\"...\"},{\"text\":\"Spring AI\",\"link\":\"...\"}]}]},{\"text\":\"工具|部署\",\"items\":[{\"items\":[{\"text\":\"Linux\",\"link\":\"/docs/linux/linux/Linux命令\"},{\"text\":\"Git学习\",\"link\":\"/docs/linux/git/git\"},{\"text\":\"Docker\",\"link\":\"/docs/linux/docker/Docker初识\"},{\"text\":\"K8s\",\"link\":\"/docs/linux/k8s/k8s初识.md\"},{\"text\":\"工具\",\"link\":\"...\"},{\"text\":\"系统\",\"link\":\"/docs/linux/macos/\"}]}]},{\"text\":\"方法论\",\"items\":[{\"text\":\"设计模式\",\"link\":\"...\"},{\"text\":\"代码规范\",\"link\":\"...\"},{\"text\":\"开发理论\",\"link\":\"...\"}]},{\"text\":\"关于\",\"items\":[{\"items\":[{\"text\":\"个人简介\",\"link\":\"...\"},{\"text\":\"联系方式\",\"link\":\"...\"},{\"text\":\"本文档搭建\",\"link\":\"...\"}]}]}],\"sidebar\":{\"/docs/front/vue/\":[{\"text\":\"Vue.js详解\",\"items\":[{\"text\":\"Vue2\",\"link\":\"/docs/front/vue/\"},{\"text\":\"Vue3\",\"link\":\"/docs/front/vue/vue3\"}]}],\"/docs/db/redis/\":[{\"text\":\"Redis详解\",\"items\":[{\"text\":\"Redis初识\",\"link\":\"/docs/db/redis/1_Redis基础\"},{\"text\":\"Redis基础\",\"link\":\"/docs/db/redis/2_Redis基础\"},{\"text\":\"Redis缓存\",\"link\":\"/docs/db/redis/3_缓存详解\"},{\"text\":\"Redis多级缓存\",\"link\":\"/docs/db/redis/4_多级缓存\"},{\"text\":\"Redis分布式缓存\",\"link\":\"/docs/db/redis/5_分布式缓存\"},{\"text\":\"Redis最佳实践\",\"link\":\"/docs/db/redis/6_最佳实践\"},{\"text\":\"Redis集群\",\"link\":\"/docs/db/redis/7_Redis集群\"},{\"text\":\"Redis & OpenResty\",\"link\":\"/docs/db/redis/8_安装OpenResty\"},{\"text\":\"Redis & Canal\",\"link\":\"/docs/db/redis/9_安装Canal\"}]}],\"/docs/linux/linux/\":[{\"text\":\"Linux\",\"items\":[{\"text\":\"Linux\",\"link\":\"/docs/linux/linux/Linux命令\"},{\"text\":\"Git\",\"link\":\"/docs/linux/git/git\"},{\"text\":\"MacOS\",\"link\":\"/docs/linux/macos/\"}]}],\"/docs/linux/git/\":[{\"text\":\"Git\",\"items\":[{\"text\":\"Linux\",\"link\":\"/docs/linux/linux/Linux命令\"},{\"text\":\"Git\",\"link\":\"/docs/linux/git/git\"},{\"text\":\"MacOS\",\"link\":\"/docs/linux/macos/\"}]}],\"/docs/linux/k8s/\":[{\"text\":\"Kubernetes\",\"items\":[{\"text\":\"k8s\",\"link\":\"/docs/linux/k8s/k8s初识\"}]}],\"/docs/linux/macos/\":[{\"text\":\"MacOS\",\"items\":[{\"text\":\"Linux\",\"link\":\"/docs/linux/linux/Linux命令\"},{\"text\":\"Git\",\"link\":\"/docs/linux/git/git\"},{\"text\":\"MacOS\",\"link\":\"/docs/linux/macos/\"}]}],\"/docs/linux/docker/\":[{\"text\":\"Docker\",\"items\":[{\"text\":\"Docker初识\",\"link\":\"/docs/linux/docker/Docker初识\"},{\"text\":\"Docker常用命令\",\"link\":\"/docs/linux/docker/Docker常用命令.md\"},{\"text\":\"Docker镜像\",\"link\":\"/docs/linux/docker/Docker镜像概念\"},{\"text\":\"Docker数据卷\",\"link\":\"/docs/linux/docker/Dokcer数据卷\"},{\"text\":\"Docker命令系列\",\"link\":\"/docs/linux/docker/Docker常见命令\"},{\"text\":\"Docker之数据库主从复制\",\"link\":\"/docs/linux/docker/主从复制\"},{\"text\":\"Docker常见软件安装\",\"link\":\"/docs/linux/docker/Docker软件安装\"},{\"text\":\"Dockerfile详解\",\"link\":\"/docs/linux/docker/Dockerfile详解\"},{\"text\":\"Docker网络\",\"link\":\"/docs/linux/docker/Docker网络.md\"},{\"text\":\"DockerCompose\",\"link\":\"/docs/linux/docker/DockerCompose\"},{\"text\":\"Docker可视化\",\"link\":\"/docs/linux/docker/Docker可视化.md\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/chizhang977/docs\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2024-present chizhang977\"},\"editLink\":{\"pattern\":\"https://github.com/vuejs/vitepress/edit/main/docs/:path\",\"text\":\"在Github上编辑此页\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>